## 第五章：Monad 101

1. 请简述 Monad 中的“延迟执行”概念。该机制如何优化共识与执行之间的关系？

    - 传统区块链中，交易执行与共识是同步进行的：每个区块打包交易 → 执行 → 达成共识。这种方式会受到共识时间的约束，限制了系统吞吐量和响应速度。monad 延迟执行是将交易执行与区块共识解耦，在当前区块进行共识的同时，异步执行上一个区块的交易。通过交错执行，系统在进行共识工作的同时，不阻塞执行过程，从而提高资源利用率。

2. 什么是乐观并行执行？其工作流程包含哪些关键步骤？

    - 乐观并行执行是一种假设性并发机制，在不预先锁定资源的前提下尝试并发执行多个交易，从而提高执行效率。
      步骤：
    - 1. 乐观执行：假设所有交易的初始状态一致，基于相同状态并发执行多个交易。
    - 2. 生成待处理结果：记录每笔交易读取和写入的状态槽（storage slots），形成执行结果与访问图。
    - 3. 提交处理结果：根据交易的原始顺序依次尝试提交结果，确保交易的线性顺序。
    - 4. 冲突检测 / 重新执行

3. 在 Monad 架构中，如何通过并行执行仍保持交易的线性排序与状态一致性？

    - 交易线性排序保持不变：所有交易仍被线性排序，顺序作为提交时的参考。
    - 并行执行阶段不改变顺序：并发执行时，每个交易假定来自相同状态。
    - 写入控制：在提交结果前，系统通过访问图判断是否有依赖冲突。
        - 若无冲突，结果按原顺序写入状态树；
        - 若有冲突，重新执行冲突交易，直到所有冲突解决。

4. Monad 的共识机制 monadBFT 有哪些特点？它与传统 BFT 共识相比有何优势？

    - 特点：高吞吐量 ， 低延迟 ， 去中心化参与 ， 高容错性
    - 优势：原生支持并行执行， 吞吐高， 共识和执行解耦， 网络参与规模可扩展性更强

5. 为什么 Monad 采用“Optimistic Concurrency Control”？它在处理交易冲突方面是如何工作的？
   采用“Optimistic Concurrency Control”原因：
    - 提高并发性
    - 减少资源等待
    - 兼容交易线性顺序提交
      交易冲突方面：
    - 并行执行时，每个交易记录访问的状态槽（读写）
    - 提交阶段，系统检测前序交易是否改动了当前交易读取的数据
    - 若检测到冲突：
        - 当前交易结果被丢弃
        - 交易重新执行，读取最新状态
        - 保证最终状态正确，且不违反交易顺序。
